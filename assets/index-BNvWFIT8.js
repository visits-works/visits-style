import{j as r}from"./jsx-runtime-CLpGMVip.js";import{r as n}from"./index-CZMpeKRu.js";import{c as h}from"./clsx-B-dksMZM.js";import{m as $}from"./merge-n6Ak0Tla.js";import{P as I}from"./index-BUASv8fC.js";import{C as P}from"./ArrowDown-Dw6nlIQU.js";import{C as V}from"./Check-DVFiI5Ty.js";import{C as W}from"./Close-WyMmPAPO.js";function z({className:o,placeholder:i="",options:u=[],error:c,unstyled:l,disabled:d,value:s,maxHeight:C=408,arrow:f,onChange:m,onClear:y,renderItem:p,...A}){const w=n.useRef(null),[M,R]=n.useState(0),S=n.useMemo(()=>l?o:$(h("flex items-center justify-between rounded-md border bg-background px-3 py-2 w-full overflow-hidden cursor-pointer","disabled:cursor-not-allowed disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-ring",c?"border-danger hover:border-danger-fore":"border-input not-disabled:hover:border-input-fore"),o),[o,c,l]),j=n.useMemo(()=>Array.isArray(s),[]),g=n.useCallback(e=>{var t;m==null||m(e),j||(t=w.current)==null||t.close()},[m,j]),b=n.useCallback(e=>Array.isArray(s)?s.indexOf(e)>-1:s===e,[s]),v=n.useMemo(()=>{const e={},t=u.filter(a=>typeof a!="string");for(let a=0,x=t.length;a<x;a+=1){const k=t[a];e[`${k.value}`]=k.label}return e},[u]),q=n.useMemo(()=>{if(!s)return i;if(Array.isArray(s)){if(!s.length)return i;const e=[...s].sort(),t=[];for(let a=0,x=e.length;a<x;a+=1)t[a]=v[`${e[a]}`]||"";return t.filter(Boolean).join(",")||i}return v[`${s}`]||i},[i,s,v]),T=q===i,O=n.useMemo(()=>h("overflow-hidden overflow-ellipsis whitespace-nowrap",T?"text-muted":"text-text"),[T]),E=n.useMemo(()=>f||r.jsx(P,{className:"absolute right-0 text-muted size-5"}),[f]),_=n.useCallback((e,t)=>p?typeof e=="string"?p(e,{index:t,selected:!1,onChange:()=>{}}):p(e,{index:t,selected:b(e.value),onChange:()=>g(e.value)}):typeof e=="string"?r.jsx("h5",{className:"font-medium py-1 px-2 text-muted",children:e},`optionheader-${t}`):r.jsx(N,{selected:b(e.value),onChange:g,...e},e.label),[p,g,b]);return r.jsx(I,{label:r.jsxs("button",{type:"button",className:S,disabled:d,...A,children:[r.jsx("span",{className:O,children:q}),r.jsxs("div",{className:"relative flex items-center pl-8 pr-3 space-x-2",children:[y&&!T?r.jsx("div",{tabIndex:-1,role:"button",className:"size-6 p-1.5 rounded hover:bg-accent","aria-label":"clear selected values",onKeyDown:e=>{e.key!=="Enter"&&e.key!=="Space"||y()},onClick:e=>{e.stopPropagation(),y()},children:r.jsx(W,{})}):null,E]})]}),ref:w,onOpen:e=>R((e==null?void 0:e.getBoundingClientRect().width)||0),disabled:d,children:r.jsx("ul",{className:"overflow-y-auto flex flex-col",role:"listbox",style:{minWidth:M,maxWidth:"calc(100vw - 3rem)",maxHeight:C},children:u.map(_)})})}function N({className:o,value:i,label:u,selected:c,onChange:l}){const d=n.useMemo(()=>h("flex items-center w-full hover:bg-accent rounded p-1",o),[o]);return r.jsxs("button",{type:"button",role:"option",className:d,"aria-selected":c,onClick:()=>l==null?void 0:l(i),children:[c?r.jsx(V,{className:"w-5 h-5 mr-1"}):r.jsx("div",{className:"w-5 h-1 mr-1"}),u]})}z.__docgenInfo={description:"",methods:[],displayName:"Select",props:{value:{required:!0,tsType:{name:"union",raw:"T | T[]",elements:[{name:"T"},{name:"Array",elements:[{name:"T"}],raw:"T[]"}]},description:"配列の値の入力の場合、複数選択モードに切り替えます"},options:{required:!1,tsType:{name:"Array",elements:[{name:"union",raw:"{ value: T; label: string; } | string",elements:[{name:"signature",type:"object",raw:"{ value: T; label: string; }",signature:{properties:[{key:"value",value:{name:"T",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"string"}]}],raw:"OptionType<T>[]"},description:"",defaultValue:{value:"[]",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: T) => void",signature:{arguments:[{type:{name:"T"},name:"value"}],return:{name:"void"}}},description:""},onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},renderItem:{required:!1,tsType:{name:"signature",type:"function",raw:"(item: OptionType<T>, config: OptionRenderConfig) => ReactElement",signature:{arguments:[{type:{name:"union",raw:"{ value: T; label: string; } | string",elements:[{name:"signature",type:"object",raw:"{ value: T; label: string; }",signature:{properties:[{key:"value",value:{name:"T",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"string"}]},name:"item"},{type:{name:"OptionRenderConfig"},name:"config"}],return:{name:"ReactElement"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},arrow:{required:!1,tsType:{name:"ReactNode"},description:""},maxHeight:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"408",computed:!1}},error:{required:!1,tsType:{name:"boolean"},description:""},unstyled:{required:!1,tsType:{name:"boolean"},description:""}},composes:["Omit"]};N.__docgenInfo={description:"",methods:[],displayName:"SelectItem",props:{className:{required:!1,tsType:{name:"string"},description:""},value:{required:!0,tsType:{name:"T"},description:""},label:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: T) => void",signature:{arguments:[{type:{name:"T"},name:"value"}],return:{name:"void"}}},description:""},selected:{required:!1,tsType:{name:"boolean"},description:""}}};export{z as S};
