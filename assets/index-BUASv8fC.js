import{j as l}from"./jsx-runtime-CLpGMVip.js";import{r as t}from"./index-CZMpeKRu.js";import{u as S,a as A,s as V,f as _,o as z,b as O,c as X,d as Y,e as B,P as D,F as U}from"./index-CMLLrBYL.js";import{c as G}from"./clsx-B-dksMZM.js";import{s as g}from"./stopPropagation-CdkcreiB.js";const J={open:150,close:75},w=t.forwardRef(({position:i,label:c,children:f,color:v="background",disabled:o,offset:m={x:0,y:6},onOpen:p,onClose:T,onManualClose:y,timeout:P=J,unstyled:h,zIndex:k=9996,role:E,...j},C)=>{const[d,u]=t.useState(!1),M=S(),s=t.useRef(p),a=t.useRef(T),{refs:n,floatingStyles:H,context:x}=A({nodeId:M,placement:i,middleware:[V(),_({fallbackAxisSideDirection:"end"}),z({mainAxis:m.y,crossAxis:m.x})],open:d,onOpenChange:e=>{var r,q;e?(r=s.current)==null||r.call(s,n.reference.current,n.floating.current):(q=a.current)==null||q.call(a,n.reference.current,n.floating.current),u(e)},whileElementsMounted:O}),{isMounted:I,styles:L}=X(x,{duration:P,initial({side:e}){let r="";return e==="top"?r="translateY(5%) scale(0.95)":e==="bottom"?r="translateY(-5%) scale(0.95)":e==="left"?r="translateX(5%) scale(0.95)":r="translateX(-5%) scale(0.95)",{opacity:0,transform:r}}}),F=t.useCallback(e=>{var r;if(g(e),y)return y();u(!1),(r=a.current)==null||r.call(a,n.reference.current,n.floating.current)},[y]);t.useEffect(()=>{if(o&&d)return u(!1)},[o,d]),t.useImperativeHandle(C,()=>({open:()=>{var e;u(!0),(e=s.current)==null||e.call(s,n.reference.current,n.floating.current)},close:()=>{var e;u(!1),(e=a.current)==null||e.call(a,n.reference.current,n.floating.current)}}),[]);const{getFloatingProps:R,getReferenceProps:N}=Y([B(x,{enabled:!o})]);return s.current=p,a.current=T,l.jsxs(l.Fragment,{children:[t.cloneElement(t.Children.only(c),N({ref:n.setReference,tabIndex:0,role:"button","aria-expanded":d,disabled:o,onClick:g})),l.jsx(D,{disabled:o||!I,children:l.jsx(U,{"data-testid":"vs-popover-shadow",onClick:F,style:{zIndex:k},autoFocus:!0,children:l.jsx("div",{role:E||"region",ref:n.setFloating,style:H,children:l.jsx(b,{unstyled:h,styles:L,...R({...j,onClick:g}),children:f})})})})]})});w.displayName="Popover";const b=t.forwardRef(({className:i,unstyled:c,styles:f,style:v={},...o},m)=>{const p=t.useMemo(()=>G("z-20 w-auto h-auto outline-none transition-transform ease-in-out",c?null:"border border-accent rounded-md shadow-lg p-1 bg-background",i),[i,c]);return l.jsx("div",{ref:m,className:p,style:{...f,...v},...o})});b.displayName="PopoverContent";w.__docgenInfo={description:"",methods:[{name:"open",docblock:null,modifiers:[],params:[],returns:null},{name:"close",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Popover",props:{label:{required:!0,tsType:{name:"ReactElement"},description:"ボタンの内容"},children:{required:!1,tsType:{name:"ReactNode"},description:"内容のリスト"},position:{required:!1,tsType:{name:"Placement"},description:`表示される場所
@default 'bottom-end'`},offset:{required:!1,tsType:{name:"signature",type:"object",raw:"{ x: number; y: number; }",signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]}},description:`Popoverが表示される間隔
@default '{ x: 0, y: 6 }'`,defaultValue:{value:"{ x: 0, y: 6 }",computed:!1}},timeout:{required:!1,tsType:{name:"union",raw:"number | { open: number; close: number; }",elements:[{name:"number"},{name:"signature",type:"object",raw:"{ open: number; close: number; }",signature:{properties:[{key:"open",value:{name:"number",required:!0}},{key:"close",value:{name:"number",required:!0}}]}}]},description:`Popoverの表示・非表示のアニメーション速度
@default { open: 150, close: 75 }`,defaultValue:{value:"{ open: 150, close: 75 }",computed:!1}},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"(ref?: ReferenceType | null, float?: HTMLElement | null) => void",signature:{arguments:[{type:{name:"union",raw:"ReferenceType | null",elements:[{name:"ReferenceType"},{name:"null"}]},name:"ref"},{type:{name:"union",raw:"HTMLElement | null",elements:[{name:"HTMLElement"},{name:"null"}]},name:"float"}],return:{name:"void"}}},description:"閉じた場合のコールバック"},onOpen:{required:!1,tsType:{name:"signature",type:"function",raw:"(ref?: ReferenceType | null, float?: HTMLElement | null) => void",signature:{arguments:[{type:{name:"union",raw:"ReferenceType | null",elements:[{name:"ReferenceType"},{name:"null"}]},name:"ref"},{type:{name:"union",raw:"HTMLElement | null",elements:[{name:"HTMLElement"},{name:"null"}]},name:"float"}],return:{name:"void"}}},description:"開けた場合のコールバック"},onManualClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"popoverを閉じる処理を手動に設定します"},disabled:{required:!1,tsType:{name:"boolean"},description:"コンテンツを出さない"},zIndex:{required:!1,tsType:{name:"number"},description:`zIndexを指定する
@default 9996`,defaultValue:{value:"9996",computed:!1}},unstyled:{required:!1,tsType:{name:"boolean"},description:"デフォルトスタイルを外し、cssクラスを適用します"},color:{defaultValue:{value:"'background'",computed:!1},required:!1}},composes:["HTMLAttributes"]};b.__docgenInfo={description:"",methods:[],displayName:"PopoverContent",props:{styles:{required:!0,tsType:{name:"CSSProperties"},description:""},unstyled:{required:!1,tsType:{name:"boolean"},description:""},style:{defaultValue:{value:"{}",computed:!1},required:!1}},composes:["HTMLAttributes"]};export{w as P};
