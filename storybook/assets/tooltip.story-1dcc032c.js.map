{"version":3,"file":"tooltip.story-1dcc032c.js","sources":["../../src/components/Tooltip/index.tsx"],"sourcesContent":["import React, { Children, cloneElement, useState } from 'react';\nimport styled from 'styled-components';\nimport {\n  useFloating, useInteractions, useHover, useClientPoint,\n  shift, offset as offsetUi, flip, FloatingFocusManager,\n} from '@floating-ui/react';\nimport type { Placement } from '@floating-ui/core';\n\nimport Portal from '../Portal';\nimport { ColorType } from '../../types';\n\nexport interface TooltipProps {\n  /** 吹き出しとして表示したい内容 */\n  label: React.ReactNode;\n  /** マウスオーバーの対象になるelement */\n  children: React.ReactElement;\n  /** 吹き出しの背景色の指定 */\n  color?: ColorType;\n  /**\n   * 表示される場所\n   * @default 'bottom'\n   */\n  position?: Placement;\n\n  /**\n   * ツールチップが表示される間隔, 単位はpx\n   * @default '{ x: 0, y: 6 }'\n   */\n  offset?: { x: number; y: number; };\n  /** 吹き出し表示座標を対象のElementではなくマウスカーソルにする */\n  clientPoint?: boolean;\n  /** 吹き出しを出さない */\n  disabled?: boolean;\n\n  className?: string;\n}\n\nexport default function Tooltip({\n  children, position = 'bottom',\n  label, color, className = '',\n  offset = { x: 0, y: 6 }, clientPoint, disabled,\n}: TooltipProps) {\n  const [open, setOpen] = useState(false);\n  const { refs, floatingStyles, context } = useFloating({\n    open,\n    placement: position,\n    middleware: [\n      shift(),\n      flip(),\n      offsetUi({ mainAxis: offset.y, crossAxis: offset.x }),\n    ],\n    onOpenChange: setOpen,\n  });\n\n  const { getReferenceProps, getFloatingProps } = useInteractions([\n    useHover(context, { enabled: !disabled }),\n    useClientPoint(context, { enabled: clientPoint }),\n  ]);\n\n  const child = typeof children === 'string' ? <span>{children}</span> : children;\n\n  return (\n    <>\n      {cloneElement(Children.only(child), {\n        ref: refs.setReference,\n        ...getReferenceProps(),\n      })}\n      <Portal>\n        {open ? (\n          <FloatingFocusManager context={context} modal={false}>\n            <TooltipWrapper\n              className={className}\n              ref={refs.setFloating}\n              role=\"tooltip\"\n              $color={color}\n              style={floatingStyles}\n              {...getFloatingProps()}\n            >\n              {label}\n            </TooltipWrapper>\n          </FloatingFocusManager>\n        ) : null}\n      </Portal>\n    </>\n  );\n}\n\nconst TooltipWrapper = styled.div<{ $color: TooltipProps['color']; }>`\n  position: relative;\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);\n  z-index: 9999;\n  padding: 0.375rem 0.625rem;\n  cursor: default;\n  white-space: pre;\n  font-size: 0.85rem;\n  z-index: 9999;\n\n  background-color: ${({ $color, theme }) => ($color ? (theme[$color] || theme.background) : theme.background)};\n\n  &:focus {\n    outline: none;\n  }\n`;\n"],"names":["Tooltip","children","label","color","offset","clientPoint","open","setOpen","useState","refs","floatingStyles","context","position","y","x","getReferenceProps","getFloatingProps","disabled","child","jsx","jsxs","Fragment","cloneElement","setReference","Portal","FloatingFocusManager","TooltipWrapper","className","styled","$color","theme"],"mappings":"yWAqCA,SAAAA,EAAA,CAAgC,SAAAC,EAC9BA,SAAAA,EAAAA,SAAqB,MAAAC,EACrBA,MAAAA,EAAOC,UAAAA,EAAAA,GAAmB,OAAAC,EAAA,CACjB,EAAA,EAAK,EAAA,CAAM,EAAE,YAAAC,EAAGA,SAAAA,CACb,EAAA,CACZ,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAA,EAAA,EACA,CAAM,KAAAC,EAAEA,eAAAA,EAAMC,QAAAA,CAAgBC,EAAAA,EAAAA,CAAwB,KAAAL,EACpDA,UAAAA,EACWM,WAAAA,CAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,CAIA,SAAAR,EAAA,EAAmBS,UAAAA,EAAAA,CAAqBC,CAAAA,CAAAA,EAAI,aAAAP,CAEzCA,CAAAA,EAGhB,CAAM,kBAAAQ,EAAEA,iBAAAA,CAAmBC,EAAAA,EAAAA,CAAAA,EAAAA,EAAAA,CACP,QAAA,CAAAC,CAAYA,CAAAA,EAAAA,EAAAA,EAAAA,CACN,QAAAZ,CAAWA,CAAAA,CAAAA,CAAAA,EAGrCa,EAAA,OAAAjB,GAAA,SAAAkB,EAAAA,IAAA,OAAA,CAAA,SAAAlB,EAAA,EAAAA,EAEA,OAAAmB,EAAA,KAAAC,WAAA,CAAA,SAAA,CAEKC,EAAAA,aAAAA,EAAAA,SAAAA,KAAAA,CAAAA,EAAAA,CAAmC,IAAAb,EAAA,aACxBc,GAAAA,EAAAA,CACW,CAAA,EACtBJ,EAAA,IAAAK,EAAA,CAAA,SAAAlB,EAAAa,EAAAA,IAAAM,EAAA,CAAA,QAAAd,EAAA,MAAA,GAAA,SAAAQ,EAAA,IAAAO,EAAA,CAAA,UAAAC,EAAA,IAAAlB,EAAA,YAAA,KAAA,UAAA,OAAAN,EAAA,MAAAO,EAAA,GAAAM,EAAA,EAAA,SAAAd,CAAA,CAAA,CAAA,CAAA,EAAA,KAAA,CAgBD,CAAA,CAAA,CAGN,CAEA,MAAAwB,EAAAE,EAAA,IAAA,WAAA,CAAiC,YAAA,0BAAA,YAAA,cAAA,CAAA,EAAA,CAAA,mLAAA,yBAAA,EAAA,CAAA,CAUV,OAAAC,EAAEA,MAAAA,CAAc,IAAAA,GAAAC,EAAAD,CAAA,GAAAC,EAAA,UAAA;;;;;;;;;;;"}