var L=Object.defineProperty;var E=(e,n,t)=>n in e?L(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var p=(e,n,t)=>E(e,typeof n!="symbol"?n+"":n,t);import{j as s}from"./jsx-runtime-CLpGMVip.js";import{r as o}from"./index-CZMpeKRu.js";import{c as C}from"./clsx-B-dksMZM.js";import{u as F}from"./useIsomorphicLayoutEffect-94RkQO-_.js";import{A as P}from"./Approved-BE8BqI2i.js";import{A as k,C as D}from"./Caution-xxpR59mu.js";import{S as R}from"./index-CR0kBLBe.js";import{a as V,c as $,P as B}from"./index-CMLLrBYL.js";import{B as v}from"./index-BzT3w_NJ.js";import{I as H}from"./index-J6MZ00ee.js";import{S as J}from"./index-ZEOFRw1I.js";import{F as W}from"./FormField-C8Ajy0sQ.js";import{m as X}from"./merge-Dx8A4mzc.js";import"./index-2nx3i45w.js";import"./index-D-TIQtLp.js";import"./index-BUASv8fC.js";import"./stopPropagation-CdkcreiB.js";import"./ArrowDown-Dw6nlIQU.js";import"./Check-DVFiI5Ty.js";import"./Close-WyMmPAPO.js";function O({type:e,label:n,message:t}){return s.jsxs("div",{className:"flex items-center px-4 py-3 w-80 text-sm bg-background border border-input rounded-lg shadow-md m-2",children:[e?s.jsxs("figure",{className:"mr-2",children:[e==="success"?s.jsx(P,{className:"text-primary size-5"}):null,e==="info"?s.jsx(k,{className:"text-info size-5"}):null,e==="error"?s.jsx(k,{className:"text-danger size-5"}):null,e==="warn"?s.jsx(D,{className:"text-warn size-5"}):null,e==="loading"?s.jsx(R,{size:20}):null]}):null,s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium leading-none",children:n}),t?s.jsx("p",{children:t}):null]})]})}O.__docgenInfo={description:"",methods:[],displayName:"ToastItem"};function S(){}class Y{constructor(){p(this,"notify",S);p(this,"lastId",0);p(this,"subscribe",n=>(this.notify=n,()=>{this.notify=S}));p(this,"add",(n,t={})=>{this.lastId+=1;const a=`${this.lastId}`;return this.notify({id:a,type:"add",config:{id:a,label:n,...t}}),a});p(this,"update",(n,t)=>{this.notify({id:n,type:"update",config:t})});p(this,"remove",n=>{this.notify({id:n,type:"remove"})});p(this,"clear",()=>{this.lastId=0})}}const f=new Y;function _({id:e,type:n,index:t,duration:a,className:m,children:b,inverted:h,timeout:y=250,max:c=3}){const x=o.useRef(!1),[l,u]=o.useState(!1),{context:j,refs:r}=V({open:l,onOpenChange:u,nodeId:e}),{isMounted:i,styles:d}=$(j,{duration:y,initial:{opacity:0,transform:`translateY(${h?"":"-"}50%)`}});o.useLayoutEffect(()=>{u(t<=c)},[t,c]),o.useEffect(()=>{x.current!==i&&(i||f.remove(e),x.current=i)},[i,e]),o.useEffect(()=>{if(!a)return;const I=window.setTimeout(()=>u(!1),a);return()=>window.clearTimeout(I)},[a,e]);const g=o.useCallback(()=>{n!=="loading"&&u(!1)},[n]),N=o.useMemo(()=>C("relative flex w-fit transition-transform ease-in-out cursor-pointer",m),[m]);return i?s.jsx("li",{role:"log",tabIndex:-1,ref:r.setFloating,className:N,style:d,onClick:g,children:b}):null}_.__docgenInfo={description:"",methods:[],displayName:"ToastContainer",props:{index:{required:!0,tsType:{name:"number"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},inverted:{required:!1,tsType:{name:"boolean"},description:""},timeout:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"250",computed:!1}},max:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"3",computed:!1}}},composes:["Pick"]};function w({className:e,margin:n=16,position:t="top-left",max:a,ListItem:m=O}){const b=o.useMemo(()=>{const r={position:"fixed"};return t.indexOf("top")>-1?r.top=n:t.indexOf("bottom")>-1&&(r.bottom=n),t.indexOf("left")>-1?(r.left=n,r.alignItems="flex-start"):t.indexOf("right")>-1?(r.right=n,r.alignItems="flex-end"):(r.left="50%",r.alignItems="center",r.transform="translateX(-50%)"),r},[n,t]),h=o.useMemo(()=>C("flex flex-col z-40 overflow-hidden",e),[e]),y=o.useMemo(()=>(t==null?void 0:t.startsWith("bottom"))||!1,[t]),c=o.useRef(new Map),[x,l]=o.useState([]),u=o.useState(0)[1];F(()=>f.subscribe(r=>{o.startTransition(()=>{if(r.type==="add")c.current.set(r.id,r.config),l(i=>[...i,r.id]);else if(r.type==="remove"){if(!c.current.delete(r.id))return;l(d=>{const g=new Set(d);return g.has(r.id)?(g.delete(r.id),Array.from(g)):d})}else if(r.type==="update"){const i=c.current.get(r.id);if(!i)return;c.current.set(r.id,{...i,...r.config}),u(d=>d+1)}})}),[]);const j=x.length;return s.jsx(B,{children:s.jsx("ol",{className:h,style:b,"aria-live":"polite",children:x.map((r,i)=>{const d=c.current.get(r);if(!d)return null;const{className:g,duration:N,...I}=d;return s.jsx(_,{id:r,index:j-i,className:g,duration:N,inverted:y,max:a,children:o.createElement(m,I)},r)})})})}w.__docgenInfo={description:"",methods:[],displayName:"Toast",props:{className:{required:!1,tsType:{name:"string"},description:""},position:{required:!1,tsType:{name:"union",raw:"'top' | 'top-right' | 'top-left' | 'bottom' | 'bottom-right' | 'bottom-left'",elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'top-left'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'bottom-right'"},{name:"literal",value:"'bottom-left'"}]},description:`toastの表示される場所の指定
\\
top, top-right, top-left, bottom, bottom-right, bottom-left
@default 'top-left'`,defaultValue:{value:"'top-left'",computed:!1}},margin:{required:!1,tsType:{name:"number"},description:`margin 単位はpx
@default '16px'`,defaultValue:{value:"16",computed:!1}},stack:{required:!1,tsType:{name:"boolean"},description:`並ばずに、Toastが積み上げます\\
(まだ開発中です)`},max:{required:!1,tsType:{name:"number"},description:`表示する最大Toast数を指定します
@default 3`},ListItem:{required:!1,tsType:{name:"FunctionComponent",elements:[{name:"Omit",elements:[{name:"ToastConfig"},{name:"union",raw:"'duration' | 'className'",elements:[{name:"literal",value:"'duration'"},{name:"literal",value:"'className'"}]}],raw:"Omit<ToastConfig, 'duration' | 'className'>"}],raw:"FunctionComponent<ToastItemProps>"},description:"",defaultValue:{value:`function ToastItem({ type, label, message }: ToastItemProps) {
  return (
    <div className="flex items-center px-4 py-3 w-80 text-sm bg-background border border-input rounded-lg shadow-md m-2">
      {type ? (
        <figure className="mr-2">
          {type === 'success' ? <ApprovedIcon className="text-primary size-5" /> : null}
          {type === 'info' ? <AlertIcon className="text-info size-5" /> : null}
          {type === 'error' ? <AlertIcon className="text-danger size-5" /> : null}
          {type === 'warn' ? <CautionIcon className="text-warn size-5" /> : null}
          {type === 'loading' ? <Spinner size={20} /> : null}
        </figure>
      ) : null}
      <div className="space-y-2">
        <p className="font-medium leading-none">{label}</p>
        {message ? <p>{message}</p> : null}
      </div>
    </div>
  );
}`,computed:!1}}}};function A({error:e,unstyled:n,className:t,...a}){const m=o.useMemo(()=>n?t:X(C("flex rounded-md border bg-background px-3 py-2 w-full [&_input]:placeholder:text-muted","[&_input]:disabled:opacity-50 [&_input]:focus-visible:outline-none",e?"border-danger hover:border-danger-fore":"border-input"),t),[t,e,n]);return s.jsx("div",{className:m,...a})}A.__docgenInfo={description:"",methods:[],displayName:"InputField",props:{error:{required:!1,tsType:{name:"boolean"},description:""},unstyled:{required:!1,tsType:{name:"boolean"},description:"基本スタイルを全部外し、完全にclassNameの定義によせます"}},composes:["HTMLAttributes"]};const G=["top","top-left","top-right","bottom","bottom-left","bottom-right"],K=["success","info","error","warn","loading"],ye={title:"components/Toast",component:w,tags:["autodocs"],argTypes:{}};function Q(){const[e,n]=o.useState(2e3),[t,a]=o.useState("success"),m=o.useCallback(()=>{f.add("Event has been created",{duration:e||null})},[e]),b=o.useCallback(()=>{f.add("Event has been created",{message:"Monday, January 3rd at 6:00pm",duration:e||null})},[e]),h=o.useCallback(()=>{f.add(`Type:${t} has been created`,{duration:e||null,type:t})},[e,t]),y=o.useCallback(async()=>{const l=f.add("Loading...",{duration:null,type:"loading"});await new Promise(u=>{window.setTimeout(u,2e3)}),f.update(l,{label:"Process Successed!",type:"success",duration:e})},[e]),c=o.useCallback(({target:l})=>{const u=l.value?parseInt(l.value,10):null;n(u||null)},[]),x=o.useMemo(()=>K.map(l=>({value:l,label:l})),[]);return s.jsxs("div",{children:[s.jsx(W,{label:"Duration",children:s.jsxs(A,{className:"flex items-center",children:[s.jsx(H,{value:e||"",onChange:c,unstyled:!0}),s.jsx("span",{className:"text-sm text-muted",children:"ms"})]})}),s.jsx("br",{}),s.jsxs("footer",{className:"grid gap-2",children:[s.jsx(v,{variant:"outline",onClick:m,children:"Default"}),s.jsx(v,{variant:"outline",onClick:b,children:"Message"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(v,{variant:"outline",size:"none",className:"pl-2 pr-3 py-2",onClick:h,children:"Show Type:"}),s.jsx(J,{value:t,onChange:a,placeholder:"select type",options:x})]}),s.jsx(v,{variant:"outline",onClick:y,children:"Loading"}),s.jsx(v,{variant:"danger",onClick:f.clear,children:"Clear All"})]})]})}const T={render:e=>s.jsxs(s.Fragment,{children:[s.jsx(Q,{}),s.jsx(w,{...e})]}),args:{fixed:!0,position:"top-left"},parameters:{controls:{position:G}}};var q,z,M;T.parameters={...T.parameters,docs:{...(q=T.parameters)==null?void 0:q.docs,source:{originalSource:`{
  render: args => <>
      <ToastControl />
      <Toast {...args} />
    </>,
  // @ts-ignore
  args: {
    fixed: true,
    position: 'top-left'
  },
  parameters: {
    controls: {
      position: positionList
    }
  }
}`,...(M=(z=T.parameters)==null?void 0:z.docs)==null?void 0:M.source}}};export{T as base,ye as default};
