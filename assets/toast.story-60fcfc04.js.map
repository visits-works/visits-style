{"version":3,"file":"toast.story-60fcfc04.js","sources":["../../src/components/Toast/ToastItem.tsx","../../src/components/Toast/index.tsx"],"sourcesContent":["import React, { useState, useCallback, useEffect, useRef } from 'react';\nimport { styled } from 'styled-components';\nimport { useFloating, useTransitionStyles } from '@floating-ui/react';\n\nimport type { ToastItemProps } from './types';\n\nexport default function ToastItem({\n  className, message, duration = 5000, clear, id, clearOnClick,\n}: ToastItemProps) {\n  const clearRef = useRef(clear);\n  const isPrevMountedRef = useRef(false);\n\n  const [open, setOpen] = useState(false);\n  const { context, refs } = useFloating({\n    open,\n    onOpenChange: setOpen,\n    nodeId: id,\n  });\n\n  const { isMounted, styles } = useTransitionStyles(context, {\n    duration: 250,\n    initial: {\n      opacity: 0,\n      transform: 'scale(0.8)',\n    },\n  });\n\n  useEffect(() => setOpen(true), [id]);\n\n  useEffect(() => {\n    if (isPrevMountedRef.current === isMounted) return;\n    if (!isMounted) {\n      clearRef.current?.(id);\n    }\n    isPrevMountedRef.current = isMounted;\n  }, [isMounted, id]);\n\n  useEffect(() => {\n    if (!duration) return;\n    const timeout = setTimeout(() => setOpen(false), duration);\n    return () => clearTimeout(timeout);\n  }, [duration]);\n\n  const handleClickToast = useCallback(() => {\n    if (!clearOnClick) return;\n    setOpen(false);\n  }, [clearOnClick]);\n\n  clearRef.current = clear;\n\n  if (!isMounted) return null;\n  return (\n    <Item\n      ref={refs.setFloating}\n      role=\"status\"\n      data-testid=\"vs-toast-item\"\n      className={className}\n      style={styles}\n      onClick={handleClickToast}\n    >\n      {message}\n    </Item>\n  );\n}\n\nconst Item = styled.li`\n  position: relative;\n  display: flex;\n  width: fit-content;\n  padding: 0.375em 0.75em;\n  max-width: 100%;\n  transition-timing-function: cubic-bezier(0.645, 0.045, 0.355, 1);\n`;\n","import React, { CSSProperties, useMemo } from 'react';\nimport { styled } from 'styled-components';\n\nimport ToastItem from './ToastItem';\nimport type { ToastContainerProps } from './types';\n\nimport Portal from '../Portal';\n\nexport default function Toast({ toasts, clear, fixed, margin = '16px', position = 'top-left' }: ToastContainerProps) {\n  const style = useMemo<CSSProperties>(() => {\n    const base = { position: fixed ? 'fixed' : 'absolute' } as CSSProperties;\n    if (position.indexOf('top') > -1) {\n      base.top = margin;\n    } else if (position.indexOf('bottom') > -1) {\n      base.bottom = margin;\n    }\n\n    if (position.indexOf('left') > -1) {\n      base.left = margin;\n      base.alignItems = 'flex-start';\n    } else if (position.indexOf('right') > -1) {\n      base.right = margin;\n      base.alignItems = 'flex-end';\n    } else {\n      base.left = '50%';\n      base.alignItems = 'center';\n      base.transform = 'translateX(-50%)';\n    }\n\n    return base;\n  }, [fixed, margin, position]);\n\n  return (\n    <Portal>\n      <ToastList style={style}>\n        {toasts.map((props) => (\n          <ToastItem\n            {...props}\n            key={props.id}\n            clear={clear}\n          />\n        ))}\n      </ToastList>\n    </Portal>\n  );\n}\n\nconst ToastList = styled.ul`\n  display: flex;\n  flex-direction: column;\n  z-index: 9999;\n  pointer-events: none;\n  overflow: hidden;\n\n  li + li {\n    margin-top: 1rem;\n  }\n`;\n"],"names":["ToastItem","className","message","clear","id","clearRef","useRef","isPrevMountedRef","open","setOpen","useState","context","refs","isMounted","styles","useEffect","duration","timeout","handleClickToast","useCallback","clearOnClick","jsx","Item","styled","Toast","toasts","fixed","position","style","useMemo","base","margin","Portal","ToastList","props","createElement"],"mappings":"4qBAMA,SAAAA,EAAA,CAAkC,UAAAC,EAChCA,QAAAA,EAAWC,SAAAA,EAAAA,IAAoB,MAAAC,EAAMA,GAAAA,EAAOC,aAAAA,CAC9B,EAAA,CACd,MAAAC,EAAAC,SAAAH,CAAA,EACAI,EAAAD,SAAA,EAAA,EAEA,CAAAE,EAAAC,CAAA,EAAAC,EAAA,SAAA,EAAA,EACA,CAAM,QAAAC,EAAEA,KAAAA,CAASC,EAAAA,EAAAA,CAAqB,KAAAJ,EACpCA,aAAAA,EACcC,OAAAA,CACNL,CAAAA,EAGV,CAAM,UAAAS,EAAEA,OAAAA,CAAWC,EAAAA,EAAAA,EAAAA,CAAwC,SAAA,IAC/C,QAAA,CACD,QAAA,EACE,UAAA,YACE,CACb,CAAA,EAGFC,EAAAA,UAAAA,IAAAA,EAAAA,EAAAA,EAAAA,CAAAA,CAAAA,CAAAA,EAEAA,EAAAA,UAAAA,IAAAA,OACER,EAAA,UAAAM,IACAA,IACER,EAAAA,EAAAA,UAAAA,MAAAA,EAAAA,KAAAA,EAAAA,GAEFE,EAAAA,QAAAA,EAA2BM,EAAAA,CAAAA,EAAAA,CAAAA,CAAAA,EAG7BE,EAAAA,UAAAA,IAAAA,CACE,GAAA,CAAAC,EAAe,OACf,MAAAC,EAAA,WAAA,IAAAR,EAAA,EAAA,EAAAO,CAAA,EACA,MAAA,IAAA,aAAAC,CAAA,CAAiC,EAAA,CAAAD,CAAA,CAAA,EAGnC,MAAAE,EAAAC,EAAAA,YAAA,IAAA,CACEC,GACAX,EAAAA,EAAAA,CAAa,EAAA,CAAAW,CAAA,CAAA,EAKf,OAFAf,EAAAA,QAAAA,EAEAQ,EACAQ,EAAAA,IAAAC,EAAA,CAAA,IAAAV,EAAA,YAAA,KAAA,SAAA,cAAA,gBAAA,UAAAX,EAAA,MAAAa,EAAA,QAAAI,EAAA,SAAAhB,CAAA,CAAA,EADgB,IAalB,CAEA,MAAAoB,EAAAC,EAAA,GAAA,WAAA,CAAsB,YAAA,kBAAA,YAAA,cAAA,CAAA,EAAA,CAAA,sJAAA,CAAA,2tBCzDtB,SAAAC,EAAA,CAA8B,OAAAC,EAAEA,MAAAA,EAAQtB,MAAAA,EAAOuB,OAAAA,EAAAA,OAAgB,SAAAC,EAAA,UAAmD,EAAA,CAChH,MAAAC,EAAAC,EAAAA,QAAA,IAAA,CACE,MAAAC,EAAA,CAAa,SAAAJ,EAAA,QAAA,UAA8B,EAC3C,OAAAC,EAAA,QAAA,KAAA,EAAA,GACEG,EAAAA,IAAAA,EAAWC,EAAAA,QAAAA,QAAAA,EAAAA,KAEXD,EAAAA,OAAAA,GAGFH,EAAA,QAAA,MAAA,EAAA,IACEG,EAAAA,KAAAA,EACAA,EAAAA,WAAAA,cAAkBH,EAAA,QAAA,OAAA,EAAA,IAElBG,EAAAA,MAAAA,EACAA,EAAAA,WAAAA,aAEAA,EAAAA,KAAAA,MACAA,EAAAA,WAAAA,SACAA,EAAAA,UAAAA,oBAGFA,CAAOA,EAAAA,CAAAA,EAAAA,EAAAA,CAAAA,CAAAA,EAGT,OAAAT,MAAAW,EAAA,CAAA,SAAAX,EAAA,IAAAY,EAAA,CAAA,MAAAL,EAAA,SAAAH,EAAA,IAAAS,GAAAC,EAAA,cAAAnC,EAAA,CAAA,GAAAkC,EAAA,IAAAA,EAAA,GAAA,MAAA/B,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAaF,CAEA,MAAA8B,EAAAV,EAAA,GAAA,WAAA,CAA2B,YAAA,mBAAA,YAAA,aAAA,CAAA,EAAA,CAAA,+GAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}